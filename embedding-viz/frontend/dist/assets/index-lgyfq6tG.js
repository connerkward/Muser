(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();function pn(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function _i(t,n){return t==null||n==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function br(t){let n,e,r;t.length!==2?(n=pn,e=(s,c)=>pn(t(s),c),r=(s,c)=>t(s)-c):(n=t===pn||t===_i?t:vi,e=t,r=t);function i(s,c,u=0,l=s.length){if(u<l){if(n(c,c)!==0)return l;do{const f=u+l>>>1;e(s[f],c)<0?u=f+1:l=f}while(u<l)}return u}function o(s,c,u=0,l=s.length){if(u<l){if(n(c,c)!==0)return l;do{const f=u+l>>>1;e(s[f],c)<=0?u=f+1:l=f}while(u<l)}return u}function a(s,c,u=0,l=s.length){const f=i(s,c,u,l-1);return f>u&&r(s[f-1],c)>-r(s[f],c)?f-1:f}return{left:i,center:a,right:o}}function vi(){return 0}function Mi(t){return t===null?NaN:+t}const bi=br(pn),Ni=bi.right;br(Mi).center;const ki=Ei($i);function Ei(t){return function(n,e,r=e){if(!((e=+e)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:o,height:a}=n;if(!((o=Math.floor(o))>=0))throw new RangeError("invalid width");if(!((a=Math.floor(a!==void 0?a:i.length/o))>=0))throw new RangeError("invalid height");if(!o||!a||!e&&!r)return n;const s=e&&t(e),c=r&&t(r),u=i.slice();return s&&c?(Et(s,u,i,o,a),Et(s,i,u,o,a),Et(s,u,i,o,a),$t(c,i,u,o,a),$t(c,u,i,o,a),$t(c,i,u,o,a)):s?(Et(s,i,u,o,a),Et(s,u,i,o,a),Et(s,i,u,o,a)):c&&($t(c,i,u,o,a),$t(c,u,i,o,a),$t(c,i,u,o,a)),n}}function Et(t,n,e,r,i){for(let o=0,a=r*i;o<a;)t(n,e,o,o+=r,1)}function $t(t,n,e,r,i){for(let o=0,a=r*i;o<r;++o)t(n,e,o,o+a,r)}function $i(t){const n=Math.floor(t);if(n===t)return Ai(t);const e=t-n,r=2*t+1;return(i,o,a,s,c)=>{if(!((s-=c)>=a))return;let u=n*o[a];const l=c*n,f=l+c;for(let h=a,d=a+l;h<d;h+=c)u+=o[Math.min(s,h)];for(let h=a,d=s;h<=d;h+=c)u+=o[Math.min(s,h+l)],i[h]=(u+e*(o[Math.max(a,h-f)]+o[Math.min(s,h+f)]))/r,u-=o[Math.max(a,h-l)]}}function Ai(t){const n=2*t+1;return(e,r,i,o,a)=>{if(!((o-=a)>=i))return;let s=t*r[i];const c=a*t;for(let u=i,l=i+c;u<l;u+=a)s+=r[Math.min(o,u)];for(let u=i,l=o;u<=l;u+=a)s+=r[Math.min(o,u+c)],e[u]=s/n,s-=r[Math.max(i,u-c)]}}function Si(t,n){let e=0;for(let r of t)r!=null&&(r=+r)>=r&&++e;return e}function Kn(t,n){let e,r;if(n===void 0)for(const i of t)i!=null&&(e===void 0?i>=i&&(e=r=i):(e>i&&(e=i),r<i&&(r=i)));else{let i=-1;for(let o of t)(o=n(o,++i,t))!=null&&(e===void 0?o>=o&&(e=r=o):(e>o&&(e=o),r<o&&(r=o)))}return[e,r]}class Rt{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const e=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=e[i],a=n+o,s=Math.abs(n)<Math.abs(o)?n-(a-o):o-(a-n);s&&(e[r++]=s),n=a}return e[r]=n,this._n=r+1,this}valueOf(){const n=this._partials;let e=this._n,r,i,o,a=0;if(e>0){for(a=n[--e];e>0&&(r=a,i=n[--e],a=r+i,o=i-(a-r),!o););e>0&&(o<0&&n[e-1]<0||o>0&&n[e-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}}const Ti=Math.sqrt(50),Ii=Math.sqrt(10),Ri=Math.sqrt(2);function _n(t,n,e){const r=(n-t)/Math.max(0,e),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=Ti?10:o>=Ii?5:o>=Ri?2:1;let s,c,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(t*u),c=Math.round(n*u),s/u<t&&++s,c/u>n&&--c,u=-u):(u=Math.pow(10,i)*a,s=Math.round(t/u),c=Math.round(n/u),s*u<t&&++s,c*u>n&&--c),c<s&&.5<=e&&e<2?_n(t,n,e*2):[s,c,u]}function ve(t,n,e){if(n=+n,t=+t,e=+e,!(e>0))return[];if(t===n)return[t];const r=n<t,[i,o,a]=r?_n(n,t,e):_n(t,n,e);if(!(o>=i))return[];const s=o-i+1,c=new Array(s);if(r)if(a<0)for(let u=0;u<s;++u)c[u]=(o-u)/-a;else for(let u=0;u<s;++u)c[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)c[u]=(i+u)/-a;else for(let u=0;u<s;++u)c[u]=(i+u)*a;return c}function vn(t,n,e){return n=+n,t=+t,e=+e,_n(t,n,e)[2]}function Ci(t,n,e){n=+n,t=+t,e=+e;const r=n<t,i=r?vn(n,t,e):vn(t,n,e);return(r?-1:1)*(i<0?1/-i:i)}function Pi(t,n,e){let r;for(;;){const i=vn(t,n,e);if(i===r||i===0||!isFinite(i))return[t,n];i>0?(t=Math.floor(t/i)*i,n=Math.ceil(n/i)*i):i<0&&(t=Math.ceil(t*i)/i,n=Math.floor(n*i)/i),r=i}}function zi(t){return Math.max(1,Math.ceil(Math.log(Si(t))/Math.LN2)+1)}function Qn(t,n){let e;if(n===void 0)for(const r of t)r!=null&&(e<r||e===void 0&&r>=r)&&(e=r);else{let r=-1;for(let i of t)(i=n(i,++r,t))!=null&&(e<i||e===void 0&&i>=i)&&(e=i)}return e}var Li={value:()=>{}};function Me(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new gn(e)}function gn(t){this._=t}function Fi(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}gn.prototype=Me.prototype={constructor:gn,on:function(t,n){var e=this._,r=Fi(t+"",e),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=qi(e[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<a;)if(i=(t=r[o]).type)e[i]=Pe(e[i],t.name,n);else if(n==null)for(i in e)e[i]=Pe(e[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new gn(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,o;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};function qi(t,n){for(var e=0,r=t.length,i;e<r;++e)if((i=t[e]).name===n)return i.value}function Pe(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=Li,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}var Jn="http://www.w3.org/1999/xhtml";const ze={svg:"http://www.w3.org/2000/svg",xhtml:Jn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Fn(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),ze.hasOwnProperty(n)?{space:ze[n],local:t}:t}function Bi(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===Jn&&n.documentElement.namespaceURI===Jn?n.createElement(t):n.createElementNS(e,t)}}function Xi(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Nr(t){var n=Fn(t);return(n.local?Xi:Bi)(n)}function Di(){}function be(t){return t==null?Di:function(){return this.querySelector(t)}}function Hi(t){typeof t!="function"&&(t=be(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=new Array(a),c,u,l=0;l<a;++l)(c=o[l])&&(u=t.call(c,c.__data__,l,o))&&("__data__"in c&&(u.__data__=c.__data__),s[l]=u);return new Z(r,this._parents)}function Oi(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ui(){return[]}function kr(t){return t==null?Ui:function(){return this.querySelectorAll(t)}}function Yi(t){return function(){return Oi(t.apply(this,arguments))}}function Vi(t){typeof t=="function"?t=Yi(t):t=kr(t);for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var a=n[o],s=a.length,c,u=0;u<s;++u)(c=a[u])&&(r.push(t.call(c,c.__data__,u,a)),i.push(c));return new Z(r,i)}function Er(t){return function(){return this.matches(t)}}function $r(t){return function(n){return n.matches(t)}}var Wi=Array.prototype.find;function Gi(t){return function(){return Wi.call(this.children,t)}}function Zi(){return this.firstElementChild}function Ki(t){return this.select(t==null?Zi:Gi(typeof t=="function"?t:$r(t)))}var Qi=Array.prototype.filter;function Ji(){return Array.from(this.children)}function ji(t){return function(){return Qi.call(this.children,t)}}function to(t){return this.selectAll(t==null?Ji:ji(typeof t=="function"?t:$r(t)))}function no(t){typeof t!="function"&&(t=Er(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=[],c,u=0;u<a;++u)(c=o[u])&&t.call(c,c.__data__,u,o)&&s.push(c);return new Z(r,this._parents)}function Ar(t){return new Array(t.length)}function eo(){return new Z(this._enter||this._groups.map(Ar),this._parents)}function Mn(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}Mn.prototype={constructor:Mn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ro(t){return function(){return t}}function io(t,n,e,r,i,o){for(var a=0,s,c=n.length,u=o.length;a<u;++a)(s=n[a])?(s.__data__=o[a],r[a]=s):e[a]=new Mn(t,o[a]);for(;a<c;++a)(s=n[a])&&(i[a]=s)}function oo(t,n,e,r,i,o,a){var s,c,u=new Map,l=n.length,f=o.length,h=new Array(l),d;for(s=0;s<l;++s)(c=n[s])&&(h[s]=d=a.call(c,c.__data__,s,n)+"",u.has(d)?i[s]=c:u.set(d,c));for(s=0;s<f;++s)d=a.call(t,o[s],s,o)+"",(c=u.get(d))?(r[s]=c,c.__data__=o[s],u.delete(d)):e[s]=new Mn(t,o[s]);for(s=0;s<l;++s)(c=n[s])&&u.get(h[s])===c&&(i[s]=c)}function ao(t){return t.__data__}function so(t,n){if(!arguments.length)return Array.from(this,ao);var e=n?oo:io,r=this._parents,i=this._groups;typeof t!="function"&&(t=ro(t));for(var o=i.length,a=new Array(o),s=new Array(o),c=new Array(o),u=0;u<o;++u){var l=r[u],f=i[u],h=f.length,d=uo(t.call(l,l&&l.__data__,u,r)),y=d.length,x=s[u]=new Array(y),N=a[u]=new Array(y),m=c[u]=new Array(h);e(l,f,x,N,m,d,n);for(var w=0,M=0,k,S;w<y;++w)if(k=x[w]){for(w>=M&&(M=w+1);!(S=N[M])&&++M<y;);k._next=S||null}}return a=new Z(a,r),a._enter=s,a._exit=c,a}function uo(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function co(){return new Z(this._exit||this._groups.map(Ar),this._parents)}function lo(t,n,e){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),n!=null&&(i=n(i),i&&(i=i.selection())),e==null?o.remove():e(o),r&&i?r.merge(i).order():i}function fo(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,o=r.length,a=Math.min(i,o),s=new Array(i),c=0;c<a;++c)for(var u=e[c],l=r[c],f=u.length,h=s[c]=new Array(f),d,y=0;y<f;++y)(d=u[y]||l[y])&&(h[y]=d);for(;c<i;++c)s[c]=e[c];return new Z(s,this._parents)}function ho(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r=t[n],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function po(t){t||(t=go);function n(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a=e[o],s=a.length,c=i[o]=new Array(s),u,l=0;l<s;++l)(u=a[l])&&(c[l]=u);c.sort(n)}return new Z(i,this._parents).order()}function go(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function mo(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function yo(){return Array.from(this)}function wo(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function xo(){let t=0;for(const n of this)++t;return t}function _o(){return!this.node()}function vo(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function Mo(t){return function(){this.removeAttribute(t)}}function bo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function No(t,n){return function(){this.setAttribute(t,n)}}function ko(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function Eo(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function $o(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function Ao(t,n){var e=Fn(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((n==null?e.local?bo:Mo:typeof n=="function"?e.local?$o:Eo:e.local?ko:No)(e,n))}function Sr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function So(t){return function(){this.style.removeProperty(t)}}function To(t,n,e){return function(){this.style.setProperty(t,n,e)}}function Io(t,n,e){return function(){var r=n.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function Ro(t,n,e){return arguments.length>1?this.each((n==null?So:typeof n=="function"?Io:To)(t,n,e??"")):Ct(this.node(),t)}function Ct(t,n){return t.style.getPropertyValue(n)||Sr(t).getComputedStyle(t,null).getPropertyValue(n)}function Co(t){return function(){delete this[t]}}function Po(t,n){return function(){this[t]=n}}function zo(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function Lo(t,n){return arguments.length>1?this.each((n==null?Co:typeof n=="function"?zo:Po)(t,n)):this.node()[t]}function Tr(t){return t.trim().split(/^|\s+/)}function Ne(t){return t.classList||new Ir(t)}function Ir(t){this._node=t,this._names=Tr(t.getAttribute("class")||"")}Ir.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Rr(t,n){for(var e=Ne(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function Cr(t,n){for(var e=Ne(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function Fo(t){return function(){Rr(this,t)}}function qo(t){return function(){Cr(this,t)}}function Bo(t,n){return function(){(n.apply(this,arguments)?Rr:Cr)(this,t)}}function Xo(t,n){var e=Tr(t+"");if(arguments.length<2){for(var r=Ne(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each((typeof n=="function"?Bo:n?Fo:qo)(e,n))}function Do(){this.textContent=""}function Ho(t){return function(){this.textContent=t}}function Oo(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function Uo(t){return arguments.length?this.each(t==null?Do:(typeof t=="function"?Oo:Ho)(t)):this.node().textContent}function Yo(){this.innerHTML=""}function Vo(t){return function(){this.innerHTML=t}}function Wo(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function Go(t){return arguments.length?this.each(t==null?Yo:(typeof t=="function"?Wo:Vo)(t)):this.node().innerHTML}function Zo(){this.nextSibling&&this.parentNode.appendChild(this)}function Ko(){return this.each(Zo)}function Qo(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Jo(){return this.each(Qo)}function jo(t){var n=typeof t=="function"?t:Nr(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function ta(){return null}function na(t,n){var e=typeof t=="function"?t:Nr(t),r=n==null?ta:typeof n=="function"?n:be(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function ea(){var t=this.parentNode;t&&t.removeChild(this)}function ra(){return this.each(ea)}function ia(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function oa(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function aa(t){return this.select(t?oa:ia)}function sa(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ua(t){return function(n){t.call(this,n,this.__data__)}}function ca(t){return t.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");return r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),{type:n,name:e}})}function la(t){return function(){var n=this.__on;if(n){for(var e=0,r=-1,i=n.length,o;e<i;++e)o=n[e],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):n[++r]=o;++r?n.length=r:delete this.__on}}}function fa(t,n,e){return function(){var r=this.__on,i,o=ua(n);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=e),i.value=n;return}}this.addEventListener(t.type,o,e),i={type:t.type,name:t.name,value:n,listener:o,options:e},r?r.push(i):this.__on=[i]}}function ha(t,n,e){var r=ca(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,u=s.length,l;c<u;++c)for(i=0,l=s[c];i<o;++i)if((a=r[i]).type===l.type&&a.name===l.name)return l.value}return}for(s=n?fa:la,i=0;i<o;++i)this.each(s(r[i],n,e));return this}function Pr(t,n,e){var r=Sr(t),i=r.CustomEvent;typeof i=="function"?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function da(t,n){return function(){return Pr(this,t,n)}}function pa(t,n){return function(){return Pr(this,t,n.apply(this,arguments))}}function ga(t,n){return this.each((typeof n=="function"?pa:da)(t,n))}function*ma(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var zr=[null];function Z(t,n){this._groups=t,this._parents=n}function tn(){return new Z([[document.documentElement]],zr)}function ya(){return this}Z.prototype=tn.prototype={constructor:Z,select:Hi,selectAll:Vi,selectChild:Ki,selectChildren:to,filter:no,data:so,enter:eo,exit:co,join:lo,merge:fo,selection:ya,order:ho,sort:po,call:mo,nodes:yo,node:wo,size:xo,empty:_o,each:vo,attr:Ao,style:Ro,property:Lo,classed:Xo,text:Uo,html:Go,raise:Ko,lower:Jo,append:jo,insert:na,remove:ra,clone:aa,datum:sa,on:ha,dispatch:ga,[Symbol.iterator]:ma};function pt(t){return typeof t=="string"?new Z([[document.querySelector(t)]],[document.documentElement]):new Z([[t]],zr)}function wa(t){let n;for(;n=t.sourceEvent;)t=n;return t}function yt(t,n){if(t=wa(t),n===void 0&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]}const jn={capture:!0,passive:!1};function te(t){t.preventDefault(),t.stopImmediatePropagation()}function xa(t){var n=t.document.documentElement,e=pt(t).on("dragstart.drag",te,jn);"onselectstart"in n?e.on("selectstart.drag",te,jn):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function _a(t,n){var e=t.document.documentElement,r=pt(t).on("dragstart.drag",null);n&&(r.on("click.drag",te,jn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}function ke(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function Lr(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function nn(){}var Gt=.7,bn=1/Gt,Tt="\\s*([+-]?\\d+)\\s*",Zt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",it="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",va=/^#([0-9a-f]{3,8})$/,Ma=new RegExp(`^rgb\\(${Tt},${Tt},${Tt}\\)$`),ba=new RegExp(`^rgb\\(${it},${it},${it}\\)$`),Na=new RegExp(`^rgba\\(${Tt},${Tt},${Tt},${Zt}\\)$`),ka=new RegExp(`^rgba\\(${it},${it},${it},${Zt}\\)$`),Ea=new RegExp(`^hsl\\(${Zt},${it},${it}\\)$`),$a=new RegExp(`^hsla\\(${Zt},${it},${it},${Zt}\\)$`),Le={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ke(nn,vt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Fe,formatHex:Fe,formatHex8:Aa,formatHsl:Sa,formatRgb:qe,toString:qe});function Fe(){return this.rgb().formatHex()}function Aa(){return this.rgb().formatHex8()}function Sa(){return Fr(this).formatHsl()}function qe(){return this.rgb().formatRgb()}function vt(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=va.exec(t))?(e=n[1].length,n=parseInt(n[1],16),e===6?Be(n):e===3?new W(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?sn(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?sn(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Ma.exec(t))?new W(n[1],n[2],n[3],1):(n=ba.exec(t))?new W(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Na.exec(t))?sn(n[1],n[2],n[3],n[4]):(n=ka.exec(t))?sn(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Ea.exec(t))?He(n[1],n[2]/100,n[3]/100,1):(n=$a.exec(t))?He(n[1],n[2]/100,n[3]/100,n[4]):Le.hasOwnProperty(t)?Be(Le[t]):t==="transparent"?new W(NaN,NaN,NaN,0):null}function Be(t){return new W(t>>16&255,t>>8&255,t&255,1)}function sn(t,n,e,r){return r<=0&&(t=n=e=NaN),new W(t,n,e,r)}function Ta(t){return t instanceof nn||(t=vt(t)),t?(t=t.rgb(),new W(t.r,t.g,t.b,t.opacity)):new W}function ne(t,n,e,r){return arguments.length===1?Ta(t):new W(t,n,e,r??1)}function W(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}ke(W,ne,Lr(nn,{brighter(t){return t=t==null?bn:Math.pow(bn,t),new W(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Gt:Math.pow(Gt,t),new W(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new W(_t(this.r),_t(this.g),_t(this.b),Nn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xe,formatHex:Xe,formatHex8:Ia,formatRgb:De,toString:De}));function Xe(){return`#${xt(this.r)}${xt(this.g)}${xt(this.b)}`}function Ia(){return`#${xt(this.r)}${xt(this.g)}${xt(this.b)}${xt((isNaN(this.opacity)?1:this.opacity)*255)}`}function De(){const t=Nn(this.opacity);return`${t===1?"rgb(":"rgba("}${_t(this.r)}, ${_t(this.g)}, ${_t(this.b)}${t===1?")":`, ${t})`}`}function Nn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function _t(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function xt(t){return t=_t(t),(t<16?"0":"")+t.toString(16)}function He(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new j(t,n,e,r)}function Fr(t){if(t instanceof j)return new j(t.h,t.s,t.l,t.opacity);if(t instanceof nn||(t=vt(t)),!t)return new j;if(t instanceof j)return t;t=t.rgb();var n=t.r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),a=NaN,s=o-i,c=(o+i)/2;return s?(n===o?a=(e-r)/s+(e<r)*6:e===o?a=(r-n)/s+2:a=(n-e)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new j(a,s,c,t.opacity)}function Ra(t,n,e,r){return arguments.length===1?Fr(t):new j(t,n,e,r??1)}function j(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}ke(j,Ra,Lr(nn,{brighter(t){return t=t==null?bn:Math.pow(bn,t),new j(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Gt:Math.pow(Gt,t),new j(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new W(Hn(t>=240?t-240:t+120,i,r),Hn(t,i,r),Hn(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new j(Oe(this.h),un(this.s),un(this.l),Nn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Nn(this.opacity);return`${t===1?"hsl(":"hsla("}${Oe(this.h)}, ${un(this.s)*100}%, ${un(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Oe(t){return t=(t||0)%360,t<0?t+360:t}function un(t){return Math.max(0,Math.min(1,t||0))}function Hn(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}const Ee=t=>()=>t;function Ca(t,n){return function(e){return t+e*n}}function Pa(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}function za(t){return(t=+t)==1?qr:function(n,e){return e-n?Pa(n,e,t):Ee(isNaN(n)?e:n)}}function qr(t,n){var e=n-t;return e?Ca(t,e):Ee(isNaN(t)?n:t)}const Kt=function t(n){var e=za(n);function r(i,o){var a=e((i=ne(i)).r,(o=ne(o)).r),s=e(i.g,o.g),c=e(i.b,o.b),u=qr(i.opacity,o.opacity);return function(l){return i.r=a(l),i.g=s(l),i.b=c(l),i.opacity=u(l),i+""}}return r.gamma=t,r}(1);function La(t,n){n||(n=[]);var e=t?Math.min(n.length,t.length):0,r=n.slice(),i;return function(o){for(i=0;i<e;++i)r[i]=t[i]*(1-o)+n[i]*o;return r}}function Fa(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function qa(t,n){var e=n?n.length:0,r=t?Math.min(e,t.length):0,i=new Array(r),o=new Array(e),a;for(a=0;a<r;++a)i[a]=qn(t[a],n[a]);for(;a<e;++a)o[a]=n[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function Ba(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function J(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function Xa(t,n){var e={},r={},i;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(i in n)i in t?e[i]=qn(t[i],n[i]):r[i]=n[i];return function(o){for(i in e)r[i]=e[i](o);return r}}var ee=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,On=new RegExp(ee.source,"g");function Da(t){return function(){return t}}function Ha(t){return function(n){return t(n)+""}}function Br(t,n){var e=ee.lastIndex=On.lastIndex=0,r,i,o,a=-1,s=[],c=[];for(t=t+"",n=n+"";(r=ee.exec(t))&&(i=On.exec(n));)(o=i.index)>e&&(o=n.slice(e,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,c.push({i:a,x:J(r,i)})),e=On.lastIndex;return e<n.length&&(o=n.slice(e),s[a]?s[a]+=o:s[++a]=o),s.length<2?c[0]?Ha(c[0].x):Da(n):(n=c.length,function(u){for(var l=0,f;l<n;++l)s[(f=c[l]).i]=f.x(u);return s.join("")})}function qn(t,n){var e=typeof n,r;return n==null||e==="boolean"?Ee(n):(e==="number"?J:e==="string"?(r=vt(n))?(n=r,Kt):Br:n instanceof vt?Kt:n instanceof Date?Ba:Fa(n)?La:Array.isArray(n)?qa:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?Xa:J)(t,n)}function Xr(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}var Ue=180/Math.PI,re={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Dr(t,n,e,r,i,o){var a,s,c;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(c=t*e+n*r)&&(e-=t*c,r-=n*c),(s=Math.sqrt(e*e+r*r))&&(e/=s,r/=s,c/=s),t*r<n*e&&(t=-t,n=-n,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*Ue,skewX:Math.atan(c)*Ue,scaleX:a,scaleY:s}}var cn;function Oa(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?re:Dr(n.a,n.b,n.c,n.d,n.e,n.f)}function Ua(t){return t==null||(cn||(cn=document.createElementNS("http://www.w3.org/2000/svg","g")),cn.setAttribute("transform",t),!(t=cn.transform.baseVal.consolidate()))?re:(t=t.matrix,Dr(t.a,t.b,t.c,t.d,t.e,t.f))}function Hr(t,n,e,r){function i(u){return u.length?u.pop()+" ":""}function o(u,l,f,h,d,y){if(u!==f||l!==h){var x=d.push("translate(",null,n,null,e);y.push({i:x-4,x:J(u,f)},{i:x-2,x:J(l,h)})}else(f||h)&&d.push("translate("+f+n+h+e)}function a(u,l,f,h){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:J(u,l)})):l&&f.push(i(f)+"rotate("+l+r)}function s(u,l,f,h){u!==l?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:J(u,l)}):l&&f.push(i(f)+"skewX("+l+r)}function c(u,l,f,h,d,y){if(u!==f||l!==h){var x=d.push(i(d)+"scale(",null,",",null,")");y.push({i:x-4,x:J(u,f)},{i:x-2,x:J(l,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(u,l){var f=[],h=[];return u=t(u),l=t(l),o(u.translateX,u.translateY,l.translateX,l.translateY,f,h),a(u.rotate,l.rotate,f,h),s(u.skewX,l.skewX,f,h),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,f,h),u=l=null,function(d){for(var y=-1,x=h.length,N;++y<x;)f[(N=h[y]).i]=N.x(d);return f.join("")}}}var Ya=Hr(Oa,"px, ","px)","deg)"),Va=Hr(Ua,", ",")",")"),Wa=1e-12;function Ye(t){return((t=Math.exp(t))+1/t)/2}function Ga(t){return((t=Math.exp(t))-1/t)/2}function Za(t){return((t=Math.exp(2*t))-1)/(t+1)}const Ka=function t(n,e,r){function i(o,a){var s=o[0],c=o[1],u=o[2],l=a[0],f=a[1],h=a[2],d=l-s,y=f-c,x=d*d+y*y,N,m;if(x<Wa)m=Math.log(h/u)/n,N=function(R){return[s+R*d,c+R*y,u*Math.exp(n*R*m)]};else{var w=Math.sqrt(x),M=(h*h-u*u+r*x)/(2*u*e*w),k=(h*h-u*u-r*x)/(2*h*e*w),S=Math.log(Math.sqrt(M*M+1)-M),C=Math.log(Math.sqrt(k*k+1)-k);m=(C-S)/n,N=function(R){var P=R*m,L=Ye(S),I=u/(e*w)*(L*Za(n*P+S)-Ga(S));return[s+I*d,c+I*y,u*L/Ye(n*P+S)]}}return N.duration=m*1e3*n/Math.SQRT2,N}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,c=s*s;return t(a,s,c)},i}(Math.SQRT2,2,4);var Pt=0,Xt=0,Ft=0,Or=1e3,kn,Dt,En=0,Mt=0,Bn=0,Qt=typeof performance=="object"&&performance.now?performance:Date,Ur=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function $e(){return Mt||(Ur(Qa),Mt=Qt.now()+Bn)}function Qa(){Mt=0}function $n(){this._call=this._time=this._next=null}$n.prototype=Yr.prototype={constructor:$n,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?$e():+e)+(n==null?0:+n),!this._next&&Dt!==this&&(Dt?Dt._next=this:kn=this,Dt=this),this._call=t,this._time=e,ie()},stop:function(){this._call&&(this._call=null,this._time=1/0,ie())}};function Yr(t,n,e){var r=new $n;return r.restart(t,n,e),r}function Ja(){$e(),++Pt;for(var t=kn,n;t;)(n=Mt-t._time)>=0&&t._call.call(void 0,n),t=t._next;--Pt}function Ve(){Mt=(En=Qt.now())+Bn,Pt=Xt=0;try{Ja()}finally{Pt=0,ts(),Mt=0}}function ja(){var t=Qt.now(),n=t-En;n>Or&&(Bn-=n,En=t)}function ts(){for(var t,n=kn,e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:kn=e);Dt=t,ie(r)}function ie(t){if(!Pt){Xt&&(Xt=clearTimeout(Xt));var n=t-Mt;n>24?(t<1/0&&(Xt=setTimeout(Ve,t-Qt.now()-Bn)),Ft&&(Ft=clearInterval(Ft))):(Ft||(En=Qt.now(),Ft=setInterval(ja,Or)),Pt=1,Ur(Ve))}}function We(t,n,e){var r=new $n;return n=n==null?0:+n,r.restart(i=>{r.stop(),t(i+n)},n,e),r}var ns=Me("start","end","cancel","interrupt"),es=[],Vr=0,Ge=1,oe=2,mn=3,Ze=4,ae=5,yn=6;function Xn(t,n,e,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(e in a)return;rs(t,e,{name:n,index:r,group:i,on:ns,tween:es,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Vr})}function Ae(t,n){var e=nt(t,n);if(e.state>Vr)throw new Error("too late; already scheduled");return e}function ot(t,n){var e=nt(t,n);if(e.state>mn)throw new Error("too late; already running");return e}function nt(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function rs(t,n,e){var r=t.__transition,i;r[n]=e,e.timer=Yr(o,0,e.time);function o(u){e.state=Ge,e.timer.restart(a,e.delay,e.time),e.delay<=u&&a(u-e.delay)}function a(u){var l,f,h,d;if(e.state!==Ge)return c();for(l in r)if(d=r[l],d.name===e.name){if(d.state===mn)return We(a);d.state===Ze?(d.state=yn,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[l]):+l<n&&(d.state=yn,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[l])}if(We(function(){e.state===mn&&(e.state=Ze,e.timer.restart(s,e.delay,e.time),s(u))}),e.state=oe,e.on.call("start",t,t.__data__,e.index,e.group),e.state===oe){for(e.state=mn,i=new Array(h=e.tween.length),l=0,f=-1;l<h;++l)(d=e.tween[l].value.call(t,t.__data__,e.index,e.group))&&(i[++f]=d);i.length=f+1}}function s(u){for(var l=u<e.duration?e.ease.call(null,u/e.duration):(e.timer.restart(c),e.state=ae,1),f=-1,h=i.length;++f<h;)i[f].call(t,l);e.state===ae&&(e.on.call("end",t,t.__data__,e.index,e.group),c())}function c(){e.state=yn,e.timer.stop(),delete r[n];for(var u in r)return;delete t.__transition}}function wn(t,n){var e=t.__transition,r,i,o=!0,a;if(e){n=n==null?null:n+"";for(a in e){if((r=e[a]).name!==n){o=!1;continue}i=r.state>oe&&r.state<ae,r.state=yn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete e[a]}o&&delete t.__transition}}function is(t){return this.each(function(){wn(this,t)})}function os(t,n){var e,r;return function(){var i=ot(this,t),o=i.tween;if(o!==e){r=e=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===n){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function as(t,n,e){var r,i;if(typeof e!="function")throw new Error;return function(){var o=ot(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:n,value:e},c=0,u=i.length;c<u;++c)if(i[c].name===n){i[c]=s;break}c===u&&i.push(s)}o.tween=i}}function ss(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r=nt(this.node(),e).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((n==null?os:as)(e,t,n))}function Se(t,n,e){var r=t._id;return t.each(function(){var i=ot(this,r);(i.value||(i.value={}))[n]=e.apply(this,arguments)}),function(i){return nt(i,r).value[n]}}function Wr(t,n){var e;return(typeof n=="number"?J:n instanceof vt?Kt:(e=vt(n))?(n=e,Kt):Br)(t,n)}function us(t){return function(){this.removeAttribute(t)}}function cs(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ls(t,n,e){var r,i=e+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=n(r=a,e)}}function fs(t,n,e){var r,i=e+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=n(r=a,e)}}function hs(t,n,e){var r,i,o;return function(){var a,s=e(this),c;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=n(r=a,s)))}}function ds(t,n,e){var r,i,o;return function(){var a,s=e(this),c;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=n(r=a,s)))}}function ps(t,n){var e=Fn(t),r=e==="transform"?Va:Wr;return this.attrTween(t,typeof n=="function"?(e.local?ds:hs)(e,r,Se(this,"attr."+t,n)):n==null?(e.local?cs:us)(e):(e.local?fs:ls)(e,r,n))}function gs(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function ms(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function ys(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&ms(t,o)),e}return i._value=n,i}function ws(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&gs(t,o)),e}return i._value=n,i}function xs(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;var r=Fn(t);return this.tween(e,(r.local?ys:ws)(r,n))}function _s(t,n){return function(){Ae(this,t).delay=+n.apply(this,arguments)}}function vs(t,n){return n=+n,function(){Ae(this,t).delay=n}}function Ms(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?_s:vs)(n,t)):nt(this.node(),n).delay}function bs(t,n){return function(){ot(this,t).duration=+n.apply(this,arguments)}}function Ns(t,n){return n=+n,function(){ot(this,t).duration=n}}function ks(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?bs:Ns)(n,t)):nt(this.node(),n).duration}function Es(t,n){if(typeof n!="function")throw new Error;return function(){ot(this,t).ease=n}}function $s(t){var n=this._id;return arguments.length?this.each(Es(n,t)):nt(this.node(),n).ease}function As(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!="function")throw new Error;ot(this,t).ease=e}}function Ss(t){if(typeof t!="function")throw new Error;return this.each(As(this._id,t))}function Ts(t){typeof t!="function"&&(t=Er(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=[],c,u=0;u<a;++u)(c=o[u])&&t.call(c,c.__data__,u,o)&&s.push(c);return new ht(r,this._parents,this._name,this._id)}function Is(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c=n[s],u=e[s],l=c.length,f=a[s]=new Array(l),h,d=0;d<l;++d)(h=c[d]||u[d])&&(f[d]=h);for(;s<r;++s)a[s]=n[s];return new ht(a,this._parents,this._name,this._id)}function Rs(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||n==="start"})}function Cs(t,n,e){var r,i,o=Rs(n)?Ae:ot;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(n,e),a.on=i}}function Ps(t,n){var e=this._id;return arguments.length<2?nt(this.node(),e).on.on(t):this.each(Cs(e,t,n))}function zs(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function Ls(){return this.on("end.remove",zs(this._id))}function Fs(t){var n=this._name,e=this._id;typeof t!="function"&&(t=be(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],c=s.length,u=o[a]=new Array(c),l,f,h=0;h<c;++h)(l=s[h])&&(f=t.call(l,l.__data__,h,s))&&("__data__"in l&&(f.__data__=l.__data__),u[h]=f,Xn(u[h],n,e,h,u,nt(l,e)));return new ht(o,this._parents,n,e)}function qs(t){var n=this._name,e=this._id;typeof t!="function"&&(t=kr(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var c=r[s],u=c.length,l,f=0;f<u;++f)if(l=c[f]){for(var h=t.call(l,l.__data__,f,c),d,y=nt(l,e),x=0,N=h.length;x<N;++x)(d=h[x])&&Xn(d,n,e,x,h,y);o.push(h),a.push(l)}return new ht(o,a,n,e)}var Bs=tn.prototype.constructor;function Xs(){return new Bs(this._groups,this._parents)}function Ds(t,n){var e,r,i;return function(){var o=Ct(this,t),a=(this.style.removeProperty(t),Ct(this,t));return o===a?null:o===e&&a===r?i:i=n(e=o,r=a)}}function Gr(t){return function(){this.style.removeProperty(t)}}function Hs(t,n,e){var r,i=e+"",o;return function(){var a=Ct(this,t);return a===i?null:a===r?o:o=n(r=a,e)}}function Os(t,n,e){var r,i,o;return function(){var a=Ct(this,t),s=e(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(t),Ct(this,t))),a===c?null:a===r&&c===i?o:(i=c,o=n(r=a,s))}}function Us(t,n){var e,r,i,o="style."+n,a="end."+o,s;return function(){var c=ot(this,t),u=c.on,l=c.value[o]==null?s||(s=Gr(n)):void 0;(u!==e||i!==l)&&(r=(e=u).copy()).on(a,i=l),c.on=r}}function Ys(t,n,e){var r=(t+="")=="transform"?Ya:Wr;return n==null?this.styleTween(t,Ds(t,r)).on("end.style."+t,Gr(t)):typeof n=="function"?this.styleTween(t,Os(t,r,Se(this,"style."+t,n))).each(Us(this._id,t)):this.styleTween(t,Hs(t,r,n),e).on("end.style."+t,null)}function Vs(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function Ws(t,n,e){var r,i;function o(){var a=n.apply(this,arguments);return a!==i&&(r=(i=a)&&Vs(t,a,e)),r}return o._value=n,o}function Gs(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;return this.tween(r,Ws(t,n,e??""))}function Zs(t){return function(){this.textContent=t}}function Ks(t){return function(){var n=t(this);this.textContent=n??""}}function Qs(t){return this.tween("text",typeof t=="function"?Ks(Se(this,"text",t)):Zs(t==null?"":t+""))}function Js(t){return function(n){this.textContent=t.call(this,n)}}function js(t){var n,e;function r(){var i=t.apply(this,arguments);return i!==e&&(n=(e=i)&&Js(i)),n}return r._value=t,r}function tu(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,js(t))}function nu(){for(var t=this._name,n=this._id,e=Zr(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,u=0;u<s;++u)if(c=a[u]){var l=nt(c,n);Xn(c,t,e,u,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new ht(r,this._parents,t,e)}function eu(){var t,n,e=this,r=e._id,i=e.size();return new Promise(function(o,a){var s={value:a},c={value:function(){--i===0&&o()}};e.each(function(){var u=ot(this,r),l=u.on;l!==t&&(n=(t=l).copy(),n._.cancel.push(s),n._.interrupt.push(s),n._.end.push(c)),u.on=n}),i===0&&o()})}var ru=0;function ht(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function Zr(){return++ru}var st=tn.prototype;ht.prototype={constructor:ht,select:Fs,selectAll:qs,selectChild:st.selectChild,selectChildren:st.selectChildren,filter:Ts,merge:Is,selection:Xs,transition:nu,call:st.call,nodes:st.nodes,node:st.node,size:st.size,empty:st.empty,each:st.each,on:Ps,attr:ps,attrTween:xs,style:Ys,styleTween:Gs,text:Qs,textTween:tu,remove:Ls,tween:ss,delay:Ms,duration:ks,ease:$s,easeVarying:Ss,end:eu,[Symbol.iterator]:st[Symbol.iterator]};function Kr(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var iu={time:null,delay:0,duration:250,ease:Kr};function ou(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function au(t){var n,e;t instanceof ht?(n=t._id,t=t._name):(n=Zr(),(e=iu).time=$e(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,u=0;u<s;++u)(c=a[u])&&Xn(c,t,n,u,a,e||ou(c,n));return new ht(r,this._parents,t,n)}tn.prototype.interrupt=is;tn.prototype.transition=au;var su=Array.prototype,Qr=su.slice;function uu(t,n){return t-n}function cu(t){for(var n=0,e=t.length,r=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];++n<e;)r+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return r}const dt=t=>()=>t;function lu(t,n){for(var e=-1,r=n.length,i;++e<r;)if(i=fu(t,n[e]))return i;return 0}function fu(t,n){for(var e=n[0],r=n[1],i=-1,o=0,a=t.length,s=a-1;o<a;s=o++){var c=t[o],u=c[0],l=c[1],f=t[s],h=f[0],d=f[1];if(hu(c,f,n))return 0;l>r!=d>r&&e<(h-u)*(r-l)/(d-l)+u&&(i=-i)}return i}function hu(t,n,e){var r;return du(t,n,e)&&pu(t[r=+(t[0]===n[0])],e[r],n[r])}function du(t,n,e){return(n[0]-t[0])*(e[1]-t[1])===(e[0]-t[0])*(n[1]-t[1])}function pu(t,n,e){return t<=n&&n<=e||e<=n&&n<=t}function gu(){}var ut=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Ke(){var t=1,n=1,e=zi,r=c;function i(u){var l=e(u);if(Array.isArray(l))l=l.slice().sort(uu);else{const f=Kn(u,mu);for(l=ve(...Pi(f[0],f[1],l),l);l[l.length-1]>=f[1];)l.pop();for(;l[1]<f[0];)l.shift()}return l.map(f=>o(u,f))}function o(u,l){const f=l==null?NaN:+l;if(isNaN(f))throw new Error(`invalid value: ${l}`);var h=[],d=[];return a(u,f,function(y){r(y,u,f),cu(y)>0?h.push([y]):d.push(y)}),d.forEach(function(y){for(var x=0,N=h.length,m;x<N;++x)if(lu((m=h[x])[0],y)!==-1){m.push(y);return}}),{type:"MultiPolygon",value:l,coordinates:h}}function a(u,l,f){var h=new Array,d=new Array,y,x,N,m,w,M;for(y=x=-1,m=wt(u[0],l),ut[m<<1].forEach(k);++y<t-1;)N=m,m=wt(u[y+1],l),ut[N|m<<1].forEach(k);for(ut[m<<0].forEach(k);++x<n-1;){for(y=-1,m=wt(u[x*t+t],l),w=wt(u[x*t],l),ut[m<<1|w<<2].forEach(k);++y<t-1;)N=m,m=wt(u[x*t+t+y+1],l),M=w,w=wt(u[x*t+y+1],l),ut[N|m<<1|w<<2|M<<3].forEach(k);ut[m|w<<3].forEach(k)}for(y=-1,w=u[x*t]>=l,ut[w<<2].forEach(k);++y<t-1;)M=w,w=wt(u[x*t+y+1],l),ut[w<<2|M<<3].forEach(k);ut[w<<3].forEach(k);function k(S){var C=[S[0][0]+y,S[0][1]+x],R=[S[1][0]+y,S[1][1]+x],P=s(C),L=s(R),I,$;(I=d[P])?($=h[L])?(delete d[I.end],delete h[$.start],I===$?(I.ring.push(R),f(I.ring)):h[I.start]=d[$.end]={start:I.start,end:$.end,ring:I.ring.concat($.ring)}):(delete d[I.end],I.ring.push(R),d[I.end=L]=I):(I=h[L])?($=d[P])?(delete h[I.start],delete d[$.end],I===$?(I.ring.push(R),f(I.ring)):h[$.start]=d[I.end]={start:$.start,end:I.end,ring:$.ring.concat(I.ring)}):(delete h[I.start],I.ring.unshift(C),h[I.start=P]=I):h[P]=d[L]={start:P,end:L,ring:[C,R]}}}function s(u){return u[0]*2+u[1]*(t+1)*4}function c(u,l,f){u.forEach(function(h){var d=h[0],y=h[1],x=d|0,N=y|0,m=Un(l[N*t+x]);d>0&&d<t&&x===d&&(h[0]=Qe(d,Un(l[N*t+x-1]),m,f)),y>0&&y<n&&N===y&&(h[1]=Qe(y,Un(l[(N-1)*t+x]),m,f))})}return i.contour=o,i.size=function(u){if(!arguments.length)return[t,n];var l=Math.floor(u[0]),f=Math.floor(u[1]);if(!(l>=0&&f>=0))throw new Error("invalid size");return t=l,n=f,i},i.thresholds=function(u){return arguments.length?(e=typeof u=="function"?u:Array.isArray(u)?dt(Qr.call(u)):dt(u),i):e},i.smooth=function(u){return arguments.length?(r=u?c:gu,i):r===c},i}function mu(t){return isFinite(t)?t:NaN}function wt(t,n){return t==null?!1:+t>=n}function Un(t){return t==null||isNaN(t=+t)?-1/0:t}function Qe(t,n,e,r){const i=r-n,o=e-n,a=isFinite(i)||isFinite(o)?i/o:Math.sign(i)/Math.sign(o);return isNaN(a)?t:t+a-.5}function yu(t){return t[0]}function wu(t){return t[1]}function xu(){return 1}function _u(){var t=yu,n=wu,e=xu,r=960,i=500,o=20,a=2,s=o*3,c=r+s*2>>a,u=i+s*2>>a,l=dt(20);function f(w){var M=new Float32Array(c*u),k=Math.pow(2,-a),S=-1;for(const z of w){var C=(t(z,++S,w)+s)*k,R=(n(z,S,w)+s)*k,P=+e(z,S,w);if(P&&C>=0&&C<c&&R>=0&&R<u){var L=Math.floor(C),I=Math.floor(R),$=C-L-.5,q=R-I-.5;M[L+I*c]+=(1-$)*(1-q)*P,M[L+1+I*c]+=$*(1-q)*P,M[L+1+(I+1)*c]+=$*q*P,M[L+(I+1)*c]+=(1-$)*q*P}}return ki({data:M,width:c,height:u},o*k),M}function h(w){var M=f(w),k=l(M),S=Math.pow(2,2*a);return Array.isArray(k)||(k=ve(Number.MIN_VALUE,Qn(M)/S,k)),Ke().size([c,u]).thresholds(k.map(C=>C*S))(M).map((C,R)=>(C.value=+k[R],d(C)))}h.contours=function(w){var M=f(w),k=Ke().size([c,u]),S=Math.pow(2,2*a),C=R=>{R=+R;var P=d(k.contour(M,R*S));return P.value=R,P};return Object.defineProperty(C,"max",{get:()=>Qn(M)/S}),C};function d(w){return w.coordinates.forEach(y),w}function y(w){w.forEach(x)}function x(w){w.forEach(N)}function N(w){w[0]=w[0]*Math.pow(2,a)-s,w[1]=w[1]*Math.pow(2,a)-s}function m(){return s=o*3,c=r+s*2>>a,u=i+s*2>>a,h}return h.x=function(w){return arguments.length?(t=typeof w=="function"?w:dt(+w),h):t},h.y=function(w){return arguments.length?(n=typeof w=="function"?w:dt(+w),h):n},h.weight=function(w){return arguments.length?(e=typeof w=="function"?w:dt(+w),h):e},h.size=function(w){if(!arguments.length)return[r,i];var M=+w[0],k=+w[1];if(!(M>=0&&k>=0))throw new Error("invalid size");return r=M,i=k,m()},h.cellSize=function(w){if(!arguments.length)return 1<<a;if(!((w=+w)>=1))throw new Error("invalid cell size");return a=Math.floor(Math.log(w)/Math.LN2),m()},h.thresholds=function(w){return arguments.length?(l=typeof w=="function"?w:Array.isArray(w)?dt(Qr.call(w)):dt(w),h):l},h.bandwidth=function(w){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((w=+w)>=0))throw new Error("invalid bandwidth");return o=(Math.sqrt(4*w*w+1)-1)/2,m()},h}function vu(t){const n=+this._x.call(null,t),e=+this._y.call(null,t);return Jr(this.cover(n,e),n,e,t)}function Jr(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,o=t._root,a={data:r},s=t._x0,c=t._y0,u=t._x1,l=t._y1,f,h,d,y,x,N,m,w;if(!o)return t._root=a,t;for(;o.length;)if((x=n>=(f=(s+u)/2))?s=f:u=f,(N=e>=(h=(c+l)/2))?c=h:l=h,i=o,!(o=o[m=N<<1|x]))return i[m]=a,t;if(d=+t._x.call(null,o.data),y=+t._y.call(null,o.data),n===d&&e===y)return a.next=o,i?i[m]=a:t._root=a,t;do i=i?i[m]=new Array(4):t._root=new Array(4),(x=n>=(f=(s+u)/2))?s=f:u=f,(N=e>=(h=(c+l)/2))?c=h:l=h;while((m=N<<1|x)===(w=(y>=h)<<1|d>=f));return i[w]=o,i[m]=a,t}function Mu(t){var n,e,r=t.length,i,o,a=new Array(r),s=new Array(r),c=1/0,u=1/0,l=-1/0,f=-1/0;for(e=0;e<r;++e)isNaN(i=+this._x.call(null,n=t[e]))||isNaN(o=+this._y.call(null,n))||(a[e]=i,s[e]=o,i<c&&(c=i),i>l&&(l=i),o<u&&(u=o),o>f&&(f=o));if(c>l||u>f)return this;for(this.cover(c,u).cover(l,f),e=0;e<r;++e)Jr(this,a[e],s[e],t[e]);return this}function bu(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,o=(r=Math.floor(n))+1;else{for(var a=i-e||1,s=this._root,c,u;e>t||t>=i||r>n||n>=o;)switch(u=(n<r)<<1|t<e,c=new Array(4),c[u]=s,s=c,a*=2,u){case 0:i=e+a,o=r+a;break;case 1:e=i-a,o=r+a;break;case 2:i=e+a,r=o-a;break;case 3:e=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._y0=r,this._x1=i,this._y1=o,this}function Nu(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function ku(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Y(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i}function Eu(t,n,e){var r,i=this._x0,o=this._y0,a,s,c,u,l=this._x1,f=this._y1,h=[],d=this._root,y,x;for(d&&h.push(new Y(d,i,o,l,f)),e==null?e=1/0:(i=t-e,o=n-e,l=t+e,f=n+e,e*=e);y=h.pop();)if(!(!(d=y.node)||(a=y.x0)>l||(s=y.y0)>f||(c=y.x1)<i||(u=y.y1)<o))if(d.length){var N=(a+c)/2,m=(s+u)/2;h.push(new Y(d[3],N,m,c,u),new Y(d[2],a,m,N,u),new Y(d[1],N,s,c,m),new Y(d[0],a,s,N,m)),(x=(n>=m)<<1|t>=N)&&(y=h[h.length-1],h[h.length-1]=h[h.length-1-x],h[h.length-1-x]=y)}else{var w=t-+this._x.call(null,d.data),M=n-+this._y.call(null,d.data),k=w*w+M*M;if(k<e){var S=Math.sqrt(e=k);i=t-S,o=n-S,l=t+S,f=n+S,r=d.data}}return r}function $u(t){if(isNaN(l=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var n,e=this._root,r,i,o,a=this._x0,s=this._y0,c=this._x1,u=this._y1,l,f,h,d,y,x,N,m;if(!e)return this;if(e.length)for(;;){if((y=l>=(h=(a+c)/2))?a=h:c=h,(x=f>=(d=(s+u)/2))?s=d:u=d,n=e,!(e=e[N=x<<1|y]))return this;if(!e.length)break;(n[N+1&3]||n[N+2&3]||n[N+3&3])&&(r=n,m=N)}for(;e.data!==t;)if(i=e,!(e=e.next))return this;return(o=e.next)&&delete e.next,i?(o?i.next=o:delete i.next,this):n?(o?n[N]=o:delete n[N],(e=n[0]||n[1]||n[2]||n[3])&&e===(n[3]||n[2]||n[1]||n[0])&&!e.length&&(r?r[m]=e:this._root=e),this):(this._root=o,this)}function Au(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this}function Su(){return this._root}function Tu(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function Iu(t){var n=[],e,r=this._root,i,o,a,s,c;for(r&&n.push(new Y(r,this._x0,this._y0,this._x1,this._y1));e=n.pop();)if(!t(r=e.node,o=e.x0,a=e.y0,s=e.x1,c=e.y1)&&r.length){var u=(o+s)/2,l=(a+c)/2;(i=r[3])&&n.push(new Y(i,u,l,s,c)),(i=r[2])&&n.push(new Y(i,o,l,u,c)),(i=r[1])&&n.push(new Y(i,u,a,s,l)),(i=r[0])&&n.push(new Y(i,o,a,u,l))}return this}function Ru(t){var n=[],e=[],r;for(this._root&&n.push(new Y(this._root,this._x0,this._y0,this._x1,this._y1));r=n.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,c=r.x1,u=r.y1,l=(a+c)/2,f=(s+u)/2;(o=i[0])&&n.push(new Y(o,a,s,l,f)),(o=i[1])&&n.push(new Y(o,l,s,c,f)),(o=i[2])&&n.push(new Y(o,a,f,l,u)),(o=i[3])&&n.push(new Y(o,l,f,c,u))}e.push(r)}for(;r=e.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Cu(t){return t[0]}function Pu(t){return arguments.length?(this._x=t,this):this._x}function zu(t){return t[1]}function Lu(t){return arguments.length?(this._y=t,this):this._y}function jr(t,n,e){var r=new Te(n??Cu,e??zu,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function Te(t,n,e,r,i,o){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Je(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var V=jr.prototype=Te.prototype;V.copy=function(){var t=new Te(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,e,r;if(!n)return t;if(!n.length)return t._root=Je(n),t;for(e=[{source:n,target:t._root=new Array(4)}];n=e.pop();)for(var i=0;i<4;++i)(r=n.source[i])&&(r.length?e.push({source:r,target:n.target[i]=new Array(4)}):n.target[i]=Je(r));return t};V.add=vu;V.addAll=Mu;V.cover=bu;V.data=Nu;V.extent=ku;V.find=Eu;V.remove=$u;V.removeAll=Au;V.root=Su;V.size=Tu;V.visit=Iu;V.visitAfter=Ru;V.x=Pu;V.y=Lu;function Fu(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function An(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function zt(t){return t=An(Math.abs(t)),t?t[1]:NaN}function qu(t,n){return function(e,r){for(var i=e.length,o=[],a=0,s=t[0],c=0;i>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),o.push(e.substring(i-=s,i+s)),!((c+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}}function Bu(t){return function(n){return n.replace(/[0-9]/g,function(e){return t[+e]})}}var Xu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Sn(t){if(!(n=Xu.exec(t)))throw new Error("invalid format: "+t);var n;return new Ie({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}Sn.prototype=Ie.prototype;function Ie(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Ie.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Du(t){t:for(var n=t.length,e=1,r=-1,i;e<n;++e)switch(t[e]){case".":r=i=e;break;case"0":r===0&&(r=e),i=e;break;default:if(!+t[e])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var ti;function Hu(t,n){var e=An(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(ti=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+An(t,Math.max(0,n+o-1))[0]}function je(t,n){var e=An(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const tr={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Fu,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>je(t*100,n),r:je,s:Hu,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function nr(t){return t}var er=Array.prototype.map,rr=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Ou(t){var n=t.grouping===void 0||t.thousands===void 0?nr:qu(er.call(t.grouping,Number),t.thousands+""),e=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?nr:Bu(er.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f){f=Sn(f);var h=f.fill,d=f.align,y=f.sign,x=f.symbol,N=f.zero,m=f.width,w=f.comma,M=f.precision,k=f.trim,S=f.type;S==="n"?(w=!0,S="g"):tr[S]||(M===void 0&&(M=12),k=!0,S="g"),(N||h==="0"&&d==="=")&&(N=!0,h="0",d="=");var C=x==="$"?e:x==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",R=x==="$"?r:/[%p]/.test(S)?a:"",P=tr[S],L=/[defgprs%]/.test(S);M=M===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function I($){var q=C,z=R,p,_,g;if(S==="c")z=P($)+z,$="";else{$=+$;var b=$<0||1/$<0;if($=isNaN($)?c:P(Math.abs($),M),k&&($=Du($)),b&&+$==0&&y!=="+"&&(b=!1),q=(b?y==="("?y:s:y==="-"||y==="("?"":y)+q,z=(S==="s"?rr[8+ti/3]:"")+z+(b&&y==="("?")":""),L){for(p=-1,_=$.length;++p<_;)if(g=$.charCodeAt(p),48>g||g>57){z=(g===46?i+$.slice(p+1):$.slice(p))+z,$=$.slice(0,p);break}}}w&&!N&&($=n($,1/0));var E=q.length+$.length+z.length,A=E<m?new Array(m-E+1).join(h):"";switch(w&&N&&($=n(A+$,A.length?m-z.length:1/0),A=""),d){case"<":$=q+$+z+A;break;case"=":$=q+A+$+z;break;case"^":$=A.slice(0,E=A.length>>1)+q+$+z+A.slice(E);break;default:$=A+q+$+z;break}return o($)}return I.toString=function(){return f+""},I}function l(f,h){var d=u((f=Sn(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(zt(h)/3)))*3,x=Math.pow(10,-y),N=rr[8+y/3];return function(m){return d(x*m)+N}}return{format:u,formatPrefix:l}}var ln,ni,ei;Uu({thousands:",",grouping:[3],currency:["$",""]});function Uu(t){return ln=Ou(t),ni=ln.format,ei=ln.formatPrefix,ln}function Yu(t){return Math.max(0,-zt(Math.abs(t)))}function Vu(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(zt(n)/3)))*3-zt(Math.abs(t)))}function Wu(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,zt(n)-zt(t))+1}var Gu=Math.PI,Zu=Gu*2,Ku=Math.abs,Re=Math.sqrt;function tt(){}function Tn(t,n){t&&or.hasOwnProperty(t.type)&&or[t.type](t,n)}var ir={Feature:function(t,n){Tn(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)Tn(e[r].geometry,n)}},or={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){se(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)se(e[r],n,0)},Polygon:function(t,n){ar(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)ar(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)Tn(e[r],n)}};function se(t,n,e){var r=-1,i=t.length-e,o;for(n.lineStart();++r<i;)o=t[r],n.point(o[0],o[1],o[2]);n.lineEnd()}function ar(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)se(t[e],n,1);n.polygonEnd()}function qt(t,n){t&&ir.hasOwnProperty(t.type)?ir[t.type](t,n):Tn(t,n)}const Qu=t=>t;var Yn=new Rt,ue=new Rt,ri,ii,ce,le,ct={point:tt,lineStart:tt,lineEnd:tt,polygonStart:function(){ct.lineStart=Ju,ct.lineEnd=tc},polygonEnd:function(){ct.lineStart=ct.lineEnd=ct.point=tt,Yn.add(Ku(ue)),ue=new Rt},result:function(){var t=Yn/2;return Yn=new Rt,t}};function Ju(){ct.point=ju}function ju(t,n){ct.point=oi,ri=ce=t,ii=le=n}function oi(t,n){ue.add(le*t-ce*n),ce=t,le=n}function tc(){oi(ri,ii)}var Lt=1/0,In=Lt,Jt=-Lt,Rn=Jt,sr={point:nc,lineStart:tt,lineEnd:tt,polygonStart:tt,polygonEnd:tt,result:function(){var t=[[Lt,In],[Jt,Rn]];return Jt=Rn=-(In=Lt=1/0),t}};function nc(t,n){t<Lt&&(Lt=t),t>Jt&&(Jt=t),n<In&&(In=n),n>Rn&&(Rn=n)}var fe=0,he=0,Ht=0,Cn=0,Pn=0,St=0,de=0,pe=0,Ot=0,ai,si,et,rt,Q={point:bt,lineStart:ur,lineEnd:cr,polygonStart:function(){Q.lineStart=ic,Q.lineEnd=oc},polygonEnd:function(){Q.point=bt,Q.lineStart=ur,Q.lineEnd=cr},result:function(){var t=Ot?[de/Ot,pe/Ot]:St?[Cn/St,Pn/St]:Ht?[fe/Ht,he/Ht]:[NaN,NaN];return fe=he=Ht=Cn=Pn=St=de=pe=Ot=0,t}};function bt(t,n){fe+=t,he+=n,++Ht}function ur(){Q.point=ec}function ec(t,n){Q.point=rc,bt(et=t,rt=n)}function rc(t,n){var e=t-et,r=n-rt,i=Re(e*e+r*r);Cn+=i*(et+t)/2,Pn+=i*(rt+n)/2,St+=i,bt(et=t,rt=n)}function cr(){Q.point=bt}function ic(){Q.point=ac}function oc(){ui(ai,si)}function ac(t,n){Q.point=ui,bt(ai=et=t,si=rt=n)}function ui(t,n){var e=t-et,r=n-rt,i=Re(e*e+r*r);Cn+=i*(et+t)/2,Pn+=i*(rt+n)/2,St+=i,i=rt*t-et*n,de+=i*(et+t),pe+=i*(rt+n),Ot+=i*3,bt(et=t,rt=n)}function ci(t){this._context=t}ci.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n),this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,Zu);break}}},result:tt};var ge=new Rt,Vn,li,fi,Ut,Yt,jt={point:tt,lineStart:function(){jt.point=sc},lineEnd:function(){Vn&&hi(li,fi),jt.point=tt},polygonStart:function(){Vn=!0},polygonEnd:function(){Vn=null},result:function(){var t=+ge;return ge=new Rt,t}};function sc(t,n){jt.point=hi,li=Ut=t,fi=Yt=n}function hi(t,n){Ut-=t,Yt-=n,ge.add(Re(Ut*Ut+Yt*Yt)),Ut=t,Yt=n}let lr,zn,fr,hr;class dr{constructor(n){this._append=n==null?di:uc(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(n,e){switch(this._point){case 0:{this._append`M${n},${e}`,this._point=1;break}case 1:{this._append`L${n},${e}`;break}default:{if(this._append`M${n},${e}`,this._radius!==fr||this._append!==zn){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,fr=r,zn=this._append,hr=this._,this._=i}this._+=hr;break}}}result(){const n=this._;return this._="",n.length?n:null}}function di(t){let n=1;this._+=t[0];for(const e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function uc(t){const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);if(n>15)return di;if(n!==lr){const e=10**n;lr=n,zn=function(i){let o=1;this._+=i[0];for(const a=i.length;o<a;++o)this._+=Math.round(arguments[o]*e)/e+i[o]}}return zn}function cc(t,n){let e=3,r=4.5,i,o;function a(s){return s&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),qt(s,i(o))),o.result()}return a.area=function(s){return qt(s,i(ct)),ct.result()},a.measure=function(s){return qt(s,i(jt)),jt.result()},a.bounds=function(s){return qt(s,i(sr)),sr.result()},a.centroid=function(s){return qt(s,i(Q)),Q.result()},a.projection=function(s){return arguments.length?(i=s==null?(t=null,Qu):(t=s).stream,a):t},a.context=function(s){return arguments.length?(o=s==null?(n=null,new dr(e)):new ci(n=s),typeof r!="function"&&o.pointRadius(r),a):n},a.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(o.pointRadius(+s),+s),a):r},a.digits=function(s){if(!arguments.length)return e;if(s==null)e=null;else{const c=Math.floor(s);if(!(c>=0))throw new RangeError(`invalid digits: ${s}`);e=c}return n===null&&(o=new dr(e)),a},a.projection(t).digits(e).context(n)}function lc(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}function fc(t,n){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof n=="function"?this.interpolator(n):this.range(n);break}}return this}function hc(t){return function(){return t}}function dc(t){return+t}var pr=[0,1];function gt(t){return t}function me(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:hc(isNaN(n)?NaN:.5)}function pc(t,n){var e;return t>n&&(e=t,t=n,n=e),function(r){return Math.max(t,Math.min(n,r))}}function gc(t,n,e){var r=t[0],i=t[1],o=n[0],a=n[1];return i<r?(r=me(i,r),o=e(a,o)):(r=me(r,i),o=e(o,a)),function(s){return o(r(s))}}function mc(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<r;)i[a]=me(t[a],t[a+1]),o[a]=e(n[a],n[a+1]);return function(s){var c=Ni(t,s,1,r)-1;return o[c](i[c](s))}}function yc(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function wc(){var t=pr,n=pr,e=qn,r,i,o,a=gt,s,c,u;function l(){var h=Math.min(t.length,n.length);return a!==gt&&(a=pc(t[0],t[h-1])),s=h>2?mc:gc,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?o:(c||(c=s(t.map(r),n,e)))(r(a(h)))}return f.invert=function(h){return a(i((u||(u=s(n,t.map(r),J)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,dc),l()):t.slice()},f.range=function(h){return arguments.length?(n=Array.from(h),l()):n.slice()},f.rangeRound=function(h){return n=Array.from(h),e=Xr,l()},f.clamp=function(h){return arguments.length?(a=h?!0:gt,l()):a!==gt},f.interpolate=function(h){return arguments.length?(e=h,l()):e},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,d){return r=h,i=d,l()}}function xc(){return wc()(gt,gt)}function _c(t,n,e,r){var i=Ci(t,n,e),o;switch(r=Sn(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(n));return r.precision==null&&!isNaN(o=Vu(i,a))&&(r.precision=o),ei(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Wu(i,Math.max(Math.abs(t),Math.abs(n))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Yu(i))&&(r.precision=o-(r.type==="%")*2);break}}return ni(r)}function pi(t){var n=t.domain;return t.ticks=function(e){var r=n();return ve(r[0],r[r.length-1],e??10)},t.tickFormat=function(e,r){var i=n();return _c(i[0],i[i.length-1],e??10,r)},t.nice=function(e){e==null&&(e=10);var r=n(),i=0,o=r.length-1,a=r[i],s=r[o],c,u,l=10;for(s<a&&(u=a,a=s,s=u,u=i,i=o,o=u);l-- >0;){if(u=vn(a,s,e),u===c)return r[i]=a,r[o]=s,n(r);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;c=u}return t},t}function ye(){var t=xc();return t.copy=function(){return yc(t,ye())},lc.apply(t,arguments),pi(t)}function vc(){var t=0,n=1,e,r,i,o,a=gt,s=!1,c;function u(f){return f==null||isNaN(f=+f)?c:a(i===0?.5:(f=(o(f)-e)*i,s?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,n]=f,e=o(t=+t),r=o(n=+n),i=e===r?0:1/(r-e),u):[t,n]},u.clamp=function(f){return arguments.length?(s=!!f,u):s},u.interpolator=function(f){return arguments.length?(a=f,u):a};function l(f){return function(h){var d,y;return arguments.length?([d,y]=h,a=f(d,y),u):[a(0),a(1)]}}return u.range=l(qn),u.rangeRound=l(Xr),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return o=f,e=f(t),r=f(n),i=e===r?0:1/(r-e),u}}function Mc(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function gi(){var t=pi(vc()(gt));return t.copy=function(){return Mc(t,gi())},fc.apply(t,arguments)}function bc(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(r*6,++r*6);return e}const we=bc("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),fn=t=>()=>t;function Nc(t,{sourceEvent:n,target:e,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function lt(t,n,e){this.k=t,this.x=n,this.y=e}lt.prototype={constructor:lt,scale:function(t){return t===1?this:new lt(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new lt(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var It=new lt(1,0,0);lt.prototype;function Wn(t){t.stopImmediatePropagation()}function Bt(t){t.preventDefault(),t.stopImmediatePropagation()}function kc(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Ec(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function gr(){return this.__zoom||It}function $c(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Ac(){return navigator.maxTouchPoints||"ontouchstart"in this}function Sc(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],a=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function Tc(){var t=kc,n=Ec,e=Sc,r=$c,i=Ac,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,c=Ka,u=Me("start","zoom","end"),l,f,h,d=500,y=150,x=0,N=10;function m(p){p.property("__zoom",gr).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",I).filter(i).on("touchstart.zoom",$).on("touchmove.zoom",q).on("touchend.zoom touchcancel.zoom",z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(p,_,g,b){var E=p.selection?p.selection():p;E.property("__zoom",gr),p!==E?S(p,_,g,b):E.interrupt().each(function(){C(this,arguments).event(b).start().zoom(null,typeof _=="function"?_.apply(this,arguments):_).end()})},m.scaleBy=function(p,_,g,b){m.scaleTo(p,function(){var E=this.__zoom.k,A=typeof _=="function"?_.apply(this,arguments):_;return E*A},g,b)},m.scaleTo=function(p,_,g,b){m.transform(p,function(){var E=n.apply(this,arguments),A=this.__zoom,T=g==null?k(E):typeof g=="function"?g.apply(this,arguments):g,F=A.invert(T),X=typeof _=="function"?_.apply(this,arguments):_;return e(M(w(A,X),T,F),E,a)},g,b)},m.translateBy=function(p,_,g,b){m.transform(p,function(){return e(this.__zoom.translate(typeof _=="function"?_.apply(this,arguments):_,typeof g=="function"?g.apply(this,arguments):g),n.apply(this,arguments),a)},null,b)},m.translateTo=function(p,_,g,b,E){m.transform(p,function(){var A=n.apply(this,arguments),T=this.__zoom,F=b==null?k(A):typeof b=="function"?b.apply(this,arguments):b;return e(It.translate(F[0],F[1]).scale(T.k).translate(typeof _=="function"?-_.apply(this,arguments):-_,typeof g=="function"?-g.apply(this,arguments):-g),A,a)},b,E)};function w(p,_){return _=Math.max(o[0],Math.min(o[1],_)),_===p.k?p:new lt(_,p.x,p.y)}function M(p,_,g){var b=_[0]-g[0]*p.k,E=_[1]-g[1]*p.k;return b===p.x&&E===p.y?p:new lt(p.k,b,E)}function k(p){return[(+p[0][0]+ +p[1][0])/2,(+p[0][1]+ +p[1][1])/2]}function S(p,_,g,b){p.on("start.zoom",function(){C(this,arguments).event(b).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(b).end()}).tween("zoom",function(){var E=this,A=arguments,T=C(E,A).event(b),F=n.apply(E,A),X=g==null?k(F):typeof g=="function"?g.apply(E,A):g,K=Math.max(F[1][0]-F[0][0],F[1][1]-F[0][1]),D=E.__zoom,O=typeof _=="function"?_.apply(E,A):_,H=c(D.invert(X).concat(K/D.k),O.invert(X).concat(K/O.k));return function(U){if(U===1)U=O;else{var G=H(U),Nt=K/G[2];U=new lt(Nt,X[0]-G[0]*Nt,X[1]-G[1]*Nt)}T.zoom(null,U)}})}function C(p,_,g){return!g&&p.__zooming||new R(p,_)}function R(p,_){this.that=p,this.args=_,this.active=0,this.sourceEvent=null,this.extent=n.apply(p,_),this.taps=0}R.prototype={event:function(p){return p&&(this.sourceEvent=p),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(p,_){return this.mouse&&p!=="mouse"&&(this.mouse[1]=_.invert(this.mouse[0])),this.touch0&&p!=="touch"&&(this.touch0[1]=_.invert(this.touch0[0])),this.touch1&&p!=="touch"&&(this.touch1[1]=_.invert(this.touch1[0])),this.that.__zoom=_,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(p){var _=pt(this.that).datum();u.call(p,this.that,new Nc(p,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:u}),_)}};function P(p,..._){if(!t.apply(this,arguments))return;var g=C(this,_).event(p),b=this.__zoom,E=Math.max(o[0],Math.min(o[1],b.k*Math.pow(2,r.apply(this,arguments)))),A=yt(p);if(g.wheel)(g.mouse[0][0]!==A[0]||g.mouse[0][1]!==A[1])&&(g.mouse[1]=b.invert(g.mouse[0]=A)),clearTimeout(g.wheel);else{if(b.k===E)return;g.mouse=[A,b.invert(A)],wn(this),g.start()}Bt(p),g.wheel=setTimeout(T,y),g.zoom("mouse",e(M(w(b,E),g.mouse[0],g.mouse[1]),g.extent,a));function T(){g.wheel=null,g.end()}}function L(p,..._){if(h||!t.apply(this,arguments))return;var g=p.currentTarget,b=C(this,_,!0).event(p),E=pt(p.view).on("mousemove.zoom",X,!0).on("mouseup.zoom",K,!0),A=yt(p,g),T=p.clientX,F=p.clientY;xa(p.view),Wn(p),b.mouse=[A,this.__zoom.invert(A)],wn(this),b.start();function X(D){if(Bt(D),!b.moved){var O=D.clientX-T,H=D.clientY-F;b.moved=O*O+H*H>x}b.event(D).zoom("mouse",e(M(b.that.__zoom,b.mouse[0]=yt(D,g),b.mouse[1]),b.extent,a))}function K(D){E.on("mousemove.zoom mouseup.zoom",null),_a(D.view,b.moved),Bt(D),b.event(D).end()}}function I(p,..._){if(t.apply(this,arguments)){var g=this.__zoom,b=yt(p.changedTouches?p.changedTouches[0]:p,this),E=g.invert(b),A=g.k*(p.shiftKey?.5:2),T=e(M(w(g,A),b,E),n.apply(this,_),a);Bt(p),s>0?pt(this).transition().duration(s).call(S,T,b,p):pt(this).call(m.transform,T,b,p)}}function $(p,..._){if(t.apply(this,arguments)){var g=p.touches,b=g.length,E=C(this,_,p.changedTouches.length===b).event(p),A,T,F,X;for(Wn(p),T=0;T<b;++T)F=g[T],X=yt(F,this),X=[X,this.__zoom.invert(X),F.identifier],E.touch0?!E.touch1&&E.touch0[2]!==X[2]&&(E.touch1=X,E.taps=0):(E.touch0=X,A=!0,E.taps=1+!!l);l&&(l=clearTimeout(l)),A&&(E.taps<2&&(f=X[0],l=setTimeout(function(){l=null},d)),wn(this),E.start())}}function q(p,..._){if(this.__zooming){var g=C(this,_).event(p),b=p.changedTouches,E=b.length,A,T,F,X;for(Bt(p),A=0;A<E;++A)T=b[A],F=yt(T,this),g.touch0&&g.touch0[2]===T.identifier?g.touch0[0]=F:g.touch1&&g.touch1[2]===T.identifier&&(g.touch1[0]=F);if(T=g.that.__zoom,g.touch1){var K=g.touch0[0],D=g.touch0[1],O=g.touch1[0],H=g.touch1[1],U=(U=O[0]-K[0])*U+(U=O[1]-K[1])*U,G=(G=H[0]-D[0])*G+(G=H[1]-D[1])*G;T=w(T,Math.sqrt(U/G)),F=[(K[0]+O[0])/2,(K[1]+O[1])/2],X=[(D[0]+H[0])/2,(D[1]+H[1])/2]}else if(g.touch0)F=g.touch0[0],X=g.touch0[1];else return;g.zoom("touch",e(M(T,F,X),g.extent,a))}}function z(p,..._){if(this.__zooming){var g=C(this,_).event(p),b=p.changedTouches,E=b.length,A,T;for(Wn(p),h&&clearTimeout(h),h=setTimeout(function(){h=null},d),A=0;A<E;++A)T=b[A],g.touch0&&g.touch0[2]===T.identifier?delete g.touch0:g.touch1&&g.touch1[2]===T.identifier&&delete g.touch1;if(g.touch1&&!g.touch0&&(g.touch0=g.touch1,delete g.touch1),g.touch0)g.touch0[1]=this.__zoom.invert(g.touch0[0]);else if(g.end(),g.taps===2&&(T=yt(T,this),Math.hypot(f[0]-T[0],f[1]-T[1])<N)){var F=pt(this).on("dblclick.zoom");F&&F.apply(this,arguments)}}}return m.wheelDelta=function(p){return arguments.length?(r=typeof p=="function"?p:fn(+p),m):r},m.filter=function(p){return arguments.length?(t=typeof p=="function"?p:fn(!!p),m):t},m.touchable=function(p){return arguments.length?(i=typeof p=="function"?p:fn(!!p),m):i},m.extent=function(p){return arguments.length?(n=typeof p=="function"?p:fn([[+p[0][0],+p[0][1]],[+p[1][0],+p[1][1]]]),m):n},m.scaleExtent=function(p){return arguments.length?(o[0]=+p[0],o[1]=+p[1],m):[o[0],o[1]]},m.translateExtent=function(p){return arguments.length?(a[0][0]=+p[0][0],a[1][0]=+p[1][0],a[0][1]=+p[0][1],a[1][1]=+p[1][1],m):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},m.constrain=function(p){return arguments.length?(e=p,m):e},m.duration=function(p){return arguments.length?(s=+p,m):s},m.interpolate=function(p){return arguments.length?(c=p,m):c},m.on=function(){var p=u.on.apply(u,arguments);return p===u?m:p},m.clickDistance=function(p){return arguments.length?(x=(p=+p)*p,m):Math.sqrt(x)},m.tapDistance=function(p){return arguments.length?(N=+p,m):N},m}let Ce="image";function Ic(t){Ce=t}function Wt(t){return`/images/${encodeURIComponent(t)}`}const ft=new Map,Vt=new Map;let hn=0;const xn=[];function Rc(t){const n=Vt.get(t);if(n)for(const e of n)try{e()}catch{}window.dispatchEvent(new CustomEvent("image:warm",{detail:{url:t}}))}function mi(t){if(typeof requestIdleCallback=="function"){requestIdleCallback(()=>t(),{timeout:250});return}setTimeout(t,0)}function xe(){for(;hn<4&&xn.length;){xn.sort((o,a)=>a.priority-o.priority||o.t-a.t);const t=xn.shift();if(!t)break;const n=t.url,e=ft.get(n);if((e==null?void 0:e.status)==="warm"||(e==null?void 0:e.status)==="loading")continue;hn++;const r=new Image;r.decoding="async",r.loading="eager";const i=(async()=>{try{r.src=n,typeof r.decode=="function"?await r.decode():await new Promise((o,a)=>{r.onload=()=>o(),r.onerror=()=>a(new Error("image load failed"))}),ft.set(n,{status:"warm"}),Rc(n)}catch{ft.set(n,{status:"error"})}finally{hn=Math.max(0,hn-1),mi(xe)}})();ft.set(n,{status:"loading",promise:i})}}function At(t){var n;return((n=ft.get(t))==null?void 0:n.status)==="warm"}function Ln(t,{priority:n=0}={}){const e=ft.get(t);return(e==null?void 0:e.status)==="warm"?Promise.resolve():(e==null?void 0:e.status)==="loading"&&e.promise?e.promise:(xn.push({url:t,priority:n,t:performance.now()}),n>=2?xe():mi(xe),new Promise(r=>{var o,a;const i=()=>{var c;const s=(c=ft.get(t))==null?void 0:c.status;(s==="warm"||s==="error")&&r()};if(((o=ft.get(t))==null?void 0:o.status)==="warm"||((a=ft.get(t))==null?void 0:a.status)==="error")return r();Cc(t,i),setTimeout(i,0)}))}function Cc(t,n){return Vt.has(t)||Vt.set(t,new Set),Vt.get(t).add(n),()=>{var e;(e=Vt.get(t))==null||e.delete(n)}}function Gn(t,n){const e=document.getElementById("tooltip");e.innerHTML=n,e.classList.add("visible"),yi(t)}function Pc(t,n,e){if(Ce==="text"){const r=(n.preview||"").slice(0,150);Gn(t,`
      <div class="text-preview">${r}${r.length>=150?"":""}</div>
      <div><strong>${n.id}</strong></div>
      <div style="color: var(--text-muted)">${e}</div>
    `)}else{const r=document.getElementById("tooltip"),i=Wt(n.content);if(r.dataset.imgUrl=i,!At(i)){Gn(t,`
        <div class="img-skeleton tooltip-skeleton"></div>
        <div><strong>${n.id}</strong></div>
        <div style="color: var(--text-muted)">${e}</div>
      `),Ln(i,{priority:1}).then(()=>{const o=document.getElementById("tooltip");o.classList.contains("visible")&&o.dataset.imgUrl===i&&(o.innerHTML=`
          <img src="${i}" alt="${n.id}" loading="eager" decoding="async" fetchpriority="low">
          <div><strong>${n.id}</strong></div>
          <div style="color: var(--text-muted)">${e}</div>
        `)});return}Gn(t,`
      <img src="${i}" alt="${n.id}" loading="eager" decoding="async" fetchpriority="low">
      <div><strong>${n.id}</strong></div>
      <div style="color: var(--text-muted)">${e}</div>
    `)}}function yi(t){const n=document.getElementById("tooltip"),e=Math.min(t.pageX+12,window.innerWidth-230),r=Math.min(t.pageY+12,window.innerHeight-220);n.style.left=`${e}px`,n.style.top=`${r}px`}function zc(){document.getElementById("tooltip").classList.remove("visible")}function wi(t,n){const e=document.getElementById("lightbox"),r=document.getElementById("lightbox-img"),i=document.getElementById("lightbox-text");if(Ce==="text")r.style.display="none",i&&(i.style.display="block",i.textContent=t.full_text||t.preview||t.id);else{e.classList.add("loading"),r.style.display="block";const o=Wt(t.content);r.removeAttribute("src"),Ln(o,{priority:3}).then(()=>{r.decoding="async",r.src=o}),r.onload=()=>e.classList.remove("loading"),i&&(i.style.display="none")}document.getElementById("lightbox-title").textContent=t.id,document.getElementById("lightbox-cluster").textContent=n,e.classList.add("visible")}function Zn(){document.getElementById("lightbox").classList.remove("visible")}function mr(){document.getElementById("species-panel").classList.remove("visible")}function Lc(){var n;const t=document.getElementById("lightbox");document.querySelector(".lightbox-close").addEventListener("click",Zn),t.addEventListener("click",e=>{e.target===t&&Zn()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&(Zn(),mr())}),(n=document.querySelector(".species-close"))==null||n.addEventListener("click",mr)}function Fc(){document.addEventListener("wheel",n=>{n.ctrlKey&&n.preventDefault()},{passive:!1}),document.addEventListener("gesturestart",n=>n.preventDefault()),document.addEventListener("gesturechange",n=>n.preventDefault()),document.addEventListener("gestureend",n=>n.preventDefault());let t=0;document.addEventListener("touchend",n=>{const e=Date.now();e-t<=300&&n.preventDefault(),t=e},{passive:!1})}function qc(t){let n=!1,e=null;return function(...r){e=r,!n&&(n=!0,requestAnimationFrame(()=>{n=!1,t(...e)}))}}let yr=0,wr=0,xr=null,_r=0,vr=0;function Mr(t,n){const e=window.innerWidth,r=window.innerHeight-52,i={top:50,right:50,bottom:50,left:50},o=t.mode||"image";n.innerHTML="";const a=pt(n).append("svg").attr("width",e).attr("height",r).style("touch-action","none").style("cursor","grab"),s=a.append("g").attr("class","zoom-layer"),c=s.append("g"),u=s.append("g").attr("class","cards-layer"),l=s.append("g").attr("class","nodes-layer"),f=s.append("g").attr("class","labels-layer");a.append("defs").append("radialGradient").attr("id","region-indicator-scrim-gradient").attr("cx","50%").attr("cy","55%").attr("r","75%").call(v=>{v.append("stop").attr("offset","0%").attr("stop-color","#020617").attr("stop-opacity",.78),v.append("stop").attr("offset","52%").attr("stop-color","#020617").attr("stop-opacity",.4),v.append("stop").attr("offset","74%").attr("stop-color","#00d4ff").attr("stop-opacity",.1),v.append("stop").attr("offset","100%").attr("stop-color","#000000").attr("stop-opacity",0)});const d=a.append("g").attr("class","region-indicator-wrap").attr("opacity",0),y=d.append("rect").attr("class","region-indicator-dim").attr("fill","#020617").attr("rx",10).attr("ry",10).attr("width",0).attr("height",0),x=d.append("rect").attr("class","region-indicator-scrim").attr("fill","url(#region-indicator-scrim-gradient)").attr("rx",10).attr("ry",10).attr("width",0).attr("height",0),N=d.append("text").attr("class","region-indicator").attr("x",20).attr("y",30).attr("font-family","IBM Plex Mono, monospace").attr("font-size",12).attr("fill","#94a3b8").attr("letter-spacing","0.15em").attr("opacity",1);function m(){const v=N.node();if(!v)return;const B=v.getBBox(),at=26,mt=12,en=B.x-at,rn=B.y-mt,on=B.width+at*2,an=B.height+mt*2;y.attr("x",en).attr("y",rn).attr("width",on).attr("height",an),x.attr("x",en).attr("y",rn).attr("width",on).attr("height",an)}const w=t.items.map(v=>v.umap),M=Kn(w,v=>v[0]),k=Kn(w,v=>v[1]),S=(M[1]-M[0])*.08,C=(k[1]-k[0])*.08,R=ye().domain([M[0]-S,M[1]+S]).range([i.left,e-i.right]),P=ye().domain([k[0]-C,k[1]+C]).range([r-i.bottom,i.top]),L=_u().x(v=>R(v.umap[0])).y(v=>P(v.umap[1])).size([e,r]).bandwidth(22).thresholds(14)(t.items),I=gi().domain([0,Qn(L,v=>v.value)]).interpolator(v=>Kt("#0a1628","#00d4ff")(Math.pow(v,.6))),$=c.selectAll("path").data(L).join("path").attr("class","contour-path").attr("d",cc()).attr("stroke",v=>I(v.value)).attr("stroke-opacity",.6).attr("fill",v=>I(v.value)).attr("fill-opacity",.04),q=new Map((t.clusters||[]).map(v=>[v.id,v.label])),z=v=>!v||v.cluster===-1?"Unclustered":q.get(v.cluster)||`Cluster ${v.cluster}`,p=l.selectAll("circle").data(t.items).join("circle").attr("class","data-point").attr("cx",v=>R(v.umap[0])).attr("cy",v=>P(v.umap[1])).attr("r",12).attr("fill",v=>v.cluster===-1?"#475569":we[v.cluster%10]).attr("fill-opacity",.4).on("mouseenter",(v,B)=>{Pc(v,B,z(B))}).on("mousemove",yi).on("mouseleave",zc).on("click",(v,B)=>{v.stopPropagation(),wi(B,z(B))}),_=t.clusters.map(v=>({...v,x:R(v.centroid[0]),y:P(v.centroid[1])+12,visible:!0}));_.sort((v,B)=>B.size-v.size);const g=f.selectAll("text").data(_).join("text").attr("class","cluster-label").attr("x",v=>v.x).attr("y",v=>v.y).attr("font-size",11).attr("font-family","IBM Plex Mono, monospace").attr("fill","#94a3b8").attr("text-anchor","middle").attr("letter-spacing","0.1em").text(v=>v.label.toUpperCase()).on("click",(v,B)=>{v.stopPropagation(),Uc(B,t.items,R,P,a,Dn,e,r)}),b=R(M[1])-R(M[0]),E=P(k[0])-P(k[1]),T=Math.max(.05,Math.min(e/b,r/E)*.84),F=25;function X(){const v=(M[0]+M[1])/2,B=(k[0]+k[1])/2,at=R(v),mt=P(B);return It.translate(e/2,r/2).scale(T).translate(-at,-mt)}function K(v){const B=Math.max(T,Math.min(F,(v==null?void 0:v.k)??1)),at=e/2,mt=r/2,en=(at-((v==null?void 0:v.x)??0))/((v==null?void 0:v.k)??1),rn=(mt-((v==null?void 0:v.y)??0))/((v==null?void 0:v.k)??1),on=at-en*B,an=mt-rn*B;return It.translate(on,an).scale(B)}const D=Dc(t,o,R,P),O=qc((v,B,at)=>{s.attr("transform",B),a.style("cursor",B.k>1?"grabbing":"grab"),Bc(v,B,t,p,l,g,_,u,$,R,P,e,r,o,d,N,m,D,z,at)});let H=It,U=1;n._imageWarmHandler&&window.removeEventListener("image:warm",n._imageWarmHandler);let G=!1;const Nt=()=>{G||(G=!0,requestAnimationFrame(()=>{G=!1,n.isConnected&&O(U,H,!1)}))};n._imageWarmHandler=Nt,window.addEventListener("image:warm",Nt);const Dn=Tc().scaleExtent([T,F]).filter(v=>!v.ctrlKey&&!v.button).on("zoom",v=>{H=v.transform,U=v.transform.k,n._savedZoomTransform=v.transform,O(v.transform.k,v.transform,!0)}).on("end",()=>{U=H.k,n._savedZoomTransform=H,O(H.k,H,!1)}),kt=n._savedZoomTransform?K(n._savedZoomTransform):X();H=kt,U=kt.k,n._savedZoomTransform=kt,a.call(Dn),a.call(Dn.transform,kt),O(kt.k,kt,!1)}function Bc(t,n,e,r,i,o,a,s,c,u,l,f,h,d,y,x,N,m,w,M=!1){const k=performance.now(),S=t<3?Math.min(.9,2/t):Math.max(0,1-(t-3)/2),C=t<5?0:Math.min(1,(t-5)/2),R=t>5,P=t>4?Math.min(1,(t-4)/1.6):0;if(P>0)if(!M||k-wr>90){wr=k;const g=(f/2-n.x)/n.k,b=(h/2-n.y)/n.k;let E=null,A=1/0;for(const T of a){const F=Math.hypot(T.x-g,T.y-b);F<A&&(A=F,E=T)}if(E){const T=E.label.toUpperCase();x.text(T),T!==xr&&(xr=T,N()),y.attr("opacity",P)}}else y.attr("opacity",P);else y.attr("opacity",0);const L=Math.max(.1,.6-(t-1)*.08);c.attr("stroke-width",2/Math.pow(t,1.5)).attr("stroke-opacity",L).attr("fill-opacity",L*.07);const I=R?Math.max(0,.85-C):.85;if(i.attr("opacity",I),!M||k-_r>70){_r=k;const _=Math.max(4,12/Math.pow(t,.4));r.attr("r",_)}if(!M||k-vr>90){vr=k;const _=Math.max(8,11/Math.pow(t,.25)),g=t<1.5?8:t<3?15:25;for(let E=0;E<a.length;E++)a[E].visible=E<g&&t<6;const b=80/t;for(let E=0;E<a.length;E++)if(a[E].visible)for(let A=E+1;A<a.length;A++){if(!a[A].visible)continue;const T=a[E].x-a[A].x,F=a[E].y-a[A].y;T*T+F*F<b*b&&(a[A].visible=!1)}o.attr("font-size",_).attr("opacity",E=>E.visible?S:0)}const z=R?C:0;(z<=.001?!0:!M||k-yr>50)?(yr=k,Oc(s,m,t,z,f,h,d,n,w,M)):(s.style("display",z<=.001?"none":null),s.style("opacity",z))}function Xc(t,n){const e=t.items,r=e.length,i=new Array(r),o=n==="text";for(let x=0;x<r;x++)i[x]={dx:0,dy:0};const a=e.map(x=>({x:x.umap[0],y:x.umap[1]}));let s=1/0,c=-1/0,u=1/0,l=-1/0;for(const x of a)s=Math.min(s,x.x),c=Math.max(c,x.x),u=Math.min(u,x.y),l=Math.max(l,x.y);const f=Math.max(c-s,l-u),h=o?1.5:.8,d=f/Math.sqrt(r)*h,y=d*2;for(let x=0;x<1;x++){const N=new Map;for(let m=0;m<r;m++){const w=a[m].x+i[m].dx,M=a[m].y+i[m].dy,k=`${Math.floor(w/y)},${Math.floor(M/y)}`;N.has(k)||N.set(k,[]),N.get(k).push(m)}for(let m=0;m<r;m++){const w=a[m].x+i[m].dx,M=a[m].y+i[m].dy,k=Math.floor(w/y),S=Math.floor(M/y);for(let C=-1;C<=1;C++)for(let R=-1;R<=1;R++){const P=N.get(`${k+C},${S+R}`);if(P)for(const L of P){if(L<=m)continue;const I=a[L].x+i[L].dx,$=a[L].y+i[L].dy,q=I-w,z=$-M,p=Math.sqrt(q*q+z*z);if(p<d&&p>.001){const _=(d-p)/2*.5,g=q/p,b=z/p;i[m].dx-=g*_,i[m].dy-=b*_,i[L].dx+=g*_,i[L].dy+=b*_}}}}for(let m=0;m<r;m++)i[m].dx*=.9,i[m].dy*=.9}return i}function Dc(t,n,e,r){var l,f;const i=n==="text",o=t.items||[],a=o.length,s=Xc(t,n),c=new Array(a);for(let h=0;h<a;h++){const d=o[h],y=((l=s[h])==null?void 0:l.dx)||0,x=((f=s[h])==null?void 0:f.dy)||0;c[h]={_i:h,id:d.id,cluster:d.cluster,preview:d.preview,content:d.content,full_text:d.full_text,x:e(d.umap[0]+y),y:r(d.umap[1]+x),clipId:`clip-${n}-${h}`,cardText:i?(d.preview||d.id||"").replace(/\s+/g," ").trim().slice(0,64):"",_item:d}}const u=jr().x(h=>h.x).y(h=>h.y).addAll(c);return{base:c,quadtree:u}}function Hc(t,n,e,r,i,o){const a=[];return!t||!t.root()||o<=0||t.visit((s,c,u,l,f)=>{if(a.length>=o||l<n||c>r||f<e||u>i)return!0;if(!s.length){let h=s;for(;h;){const d=h.data;if(d&&d.x>=n&&d.x<=r&&d.y>=e&&d.y<=i&&(a.push(d),a.length>=o))return!0;h=h.next}}return!1}),a}function Oc(t,n,e,r,i,o,a,s,c,u){if(!n)return;if(r<=.001){t.style("display","none");return}t.style("display",null),t.style("opacity",r);const l=a==="text",d=((l?78:70)+Math.min(40,Math.max(0,(e-5)*4)))/e,y=l?d*1.4:d,x=l?d*.9:d,m=240/s.k,w=(0-s.x)/s.k-m,M=(i-s.x)/s.k+m,k=(0-s.y)/s.k-m,S=(o-s.y)/s.k+m,R=Math.max(40,Math.floor((l?200:320)*Math.min(1,r+.15))),P=Hc(n.quadtree,w,k,M,S,R),L=!u||r>.75,I=l?"text-card":"image-card",$=t.selectAll(`.${I}`).data(P,_=>_.id);u?$.exit().style("display","none"):$.exit().remove();const q=$.enter().append("g").attr("class",I);l?(q.append("rect").attr("class","card-bg"),q.append("text").attr("class","card-text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("fill","#e2e8f0").attr("font-family","IBM Plex Mono, monospace").attr("letter-spacing","0.02em").text(_=>_.cardText||_.id)):(q.append("clipPath").attr("id",_=>_.clipId).append("rect").attr("class","clip-rect"),q.append("rect").attr("class","card-skeleton").attr("clip-path",_=>`url(#${_.clipId})`),q.append("image").attr("href",_=>{const g=Wt(_.content);return L?(At(g)||Ln(g,{priority:0}),At(g)?g:""):""}).attr("clip-path",_=>`url(#${_.clipId})`).attr("preserveAspectRatio","xMidYMid slice"),q.append("rect").attr("class","card-border").attr("fill","none")),q.on("click",(_,g)=>{_.stopPropagation(),wi(g._item||g,c(g._item||g))});const z=q.merge($);z.style("display",null),z.attr("transform",_=>`translate(${_.x-y/2}, ${_.y-x/2})`);const p=3/e;if(l){z.select(".card-bg").attr("width",y).attr("height",x).attr("fill","#0d1117").attr("stroke",g=>g.cluster===-1?"#475569":we[g.cluster%10]).attr("stroke-opacity",.4).attr("stroke-width",1/e).attr("rx",p).attr("ry",p);const _=9/e;z.select("text.card-text").attr("x",y/2).attr("y",x/2).attr("font-size",_)}else{z.select(".clip-rect").attr("width",y).attr("height",x).attr("rx",p).attr("ry",p),z.select(".card-skeleton").attr("width",y).attr("height",x).attr("rx",p).attr("ry",p).attr("fill","#0b1220").attr("opacity",g=>{const b=Wt(g.content);return At(b)?0:1});const _=z.select("image").attr("width",y).attr("height",x).attr("clip-path",g=>`url(#${g.clipId})`);L&&_.attr("href",g=>{const b=Wt(g.content);return At(b)||Ln(b,{priority:0}),At(b)?b:""}),z.select(".card-border").attr("width",y).attr("height",x).attr("stroke",g=>g.cluster===-1?"#475569":we[g.cluster%10]).attr("stroke-opacity",.5).attr("stroke-width",1.3/e).attr("rx",p).attr("ry",p)}}function Uc(t,n,e,r,i,o,a,s){const c=n.filter(M=>M.cluster===t.id);if(!c.length)return;const u=c.map(M=>e(M.umap[0])),l=c.map(M=>r(M.umap[1])),f=60,h=Math.min(...u)-f,d=Math.max(...u)+f,y=Math.min(...l)-f,x=Math.max(...l)+f,N=Math.min(a/(d-h),s/(x-y))*.85,m=(h+d)/2,w=(y+x)/2;i.transition().duration(600).ease(Kr).call(o.transform,It.translate(a/2,s/2).scale(N).translate(-m,-w))}let dn=null;Fc();Lc();const _e=document.getElementById("mode-toggle"),Yc=new URLSearchParams(window.location.search),xi=Yc.get("mode")||"image";_e.checked=xi==="text";_e.addEventListener("change",()=>{const t=_e.checked?"text":"image",n=new URL(window.location);n.searchParams.set("mode",t),window.location.href=n.toString()});async function Vc(){try{dn=await(await fetch(xi==="text"?"/data/embeddings_text.json":"/data/embeddings_image.json")).json();const r=dn.mode||"image";Ic(r),document.body.classList.toggle("text-mode",r==="text"),Mr(dn,document.getElementById("topography"));let i,o=window.innerWidth,a=window.innerHeight;window.addEventListener("resize",()=>{clearTimeout(i),i=setTimeout(()=>{const s=window.innerWidth,c=window.innerHeight;s===o&&c===a||(o=s,a=c,Mr(dn,document.getElementById("topography")))},200)})}catch(t){console.error("Load error:",t),document.getElementById("topography").innerHTML=`
      <div style="padding: 2rem; color: var(--text-muted); font-family: 'IBM Plex Mono', monospace;">
        Run pipeline: <code style="color: var(--accent-primary)">cd pipeline && uv run python main.py</code>
      </div>
    `}}Vc();
